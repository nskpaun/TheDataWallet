<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>TheDataWalletExplained</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --node-fill:  #ECECFF; --node-border:  #CCCCFF; --cluster-fill:  #ffffde; --cluster-border:  #aaaa33; --note-fill:  #fff5ad; --note-border:  #aaaa33; --mermaid-color:  var(--text-color); }


:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; tab-size: 4; background-position: inherit inherit; background-repeat: inherit inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror-linenumber { }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit inherit; background-repeat: inherit inherit; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; background-position: 0px 0px; background-repeat: initial initial; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print { 
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background-color: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; background-position: initial initial; background-repeat: initial initial; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { white-space: pre !important; border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; text-shadow: initial !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); background-position: initial initial; background-repeat: initial initial; }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }
@media print { 
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-require-zoom-fix foreignObject { font-size: var(--mermaid-font-zoom); }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; white-space: nowrap; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; border: none !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: 0px 0px; background-repeat: initial initial; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

 :root {--mermaid-font-zoom:1em ;} 
</style>
</head>
<body class='typora-export'>
<div id='write'  class=''><p>&nbsp;</p><h1><a name="the-data-wallet" class="md-header-anchor"></a><span>The Data Wallet</span></h1><p><span>People are learing their private data is valuable.</span></p><p><span>For a long time there has been a hidden contract between people using free internet services and the companies building those services. People can use the service for free in exchange for the rights to their private data. This includes things like your social media posts, your browser history, even down to how much time you spend looking at something.</span></p><p><span>Some of the most profitable companies in the world are able to drive those profits by using your private data. Without the use of that data, those companies would be less profitable. One popular narrative is that these companies are &quot;selling your data to advertisers&quot;. Therefore your data should have some monetary value. This begs a few questions:</span></p><ul><li><span>Precisely how valuable is my private data?</span></li><li><span>Am I getting an objectively fair deal when I exchange my private data for the ability to use an internet service?</span></li><li><span>How can I prevent my data from being taken from me unfairly?</span></li></ul><p><span>With commodities like oil these questions are fairly easy to answer because there is a transparent and competitive market for oil. We can&#39;t treat data exactly like oil because it can be copied and shared, but we can consider the utility of the data. This leads us to our motivating question: </span><strong><span>What would it look like for you to own your data and have the ability to sell its utility on an open market?</span></strong></p><h2><a name="the-basic-idea" class="md-header-anchor"></a><span>The Basic Idea</span></h2><p><span>We would like to have a system where you can be paid money in exchange for using your private data without actually sharing the private data. This system will need a few basic components.</span></p><ul><li><strong><span>Encrypted Client-Side Data Store:</span></strong><span> This is where your private data is kept. Nobody can access this data other than you ever. Raw unencrypted data from this store can never leave your device. This data can be anything from private messages to browser history to health telemetry and beyond.</span></li><li><strong><span>Privacy Preserving Data Transformer:</span></strong><span> This component is required to transform your data so that it still has utility, but makes it impossible to determine the underlying dataset.</span></li><li><strong><span>Data Marketplace:</span></strong><span> This component should allow buyers to request certain kinds of data utility and allow sellers to fulfill that request in exchange for money.</span></li><li><strong><span>Data Utilizer:</span></strong><span> This is the component that receives data from the marketplace and in turn provides some value. </span></li></ul><div class="md-diagram-panel"><svg id="mermaidChart984" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="169.59375" style="max-width: 961.515625px; height: 209.59375px;" viewBox="-8 -8 961.515625 169.59375" class="md-require-zoom-fix"><style>#mermaidChart984{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333333;}#mermaidChart984 .error-icon{fill:hsl(60,100%,100%);}#mermaidChart984 .error-text{fill:rgb(0,0,0);stroke:rgb(0,0,0);}#mermaidChart984 .edge-thickness-normal{stroke-width:2px;}#mermaidChart984 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart984 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart984 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart984 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart984 .marker{fill:#000000;}#mermaidChart984 .marker.cross{stroke:#000000;}#mermaidChart984 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart984 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaidChart984 .label text{fill:#333;}#mermaidChart984 .node rect,#mermaidChart984 .node circle,#mermaidChart984 .node ellipse,#mermaidChart984 .node polygon,#mermaidChart984 .node path{fill:#ECECFF;stroke:hsl(240,60%,86.2745098039%);stroke-width:1px;}#mermaidChart984 .node .label{text-align:center;}#mermaidChart984 .node.clickable{cursor:pointer;}#mermaidChart984 .arrowheadPath{fill:undefined;}#mermaidChart984 .edgePath .path{stroke:#000000;stroke-width:1.5px;}#mermaidChart984 .flowchart-link{stroke:#000000;fill:none;}#mermaidChart984 .edgeLabel{background-color:#f4f4f4;text-align:center;}#mermaidChart984 .edgeLabel rect{opacity:0.5;background-color:#f4f4f4;fill:#f4f4f4;}#mermaidChart984 .cluster rect{fill:hsl(60,100%,100%);stroke:hsl(60,60%,90%);stroke-width:1px;}#mermaidChart984 .cluster text{fill:rgb(0,0,0);}#mermaidChart984 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(60,100%,100%);border:1px solid undefined;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart984:root{--mermaid-font-family:sans-serif;}#mermaidChart984:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart984 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-eds LE-dt" id="L-eds-dt" style="opacity: 1;"><path class="path" d="M274.9375,80.796875L299.9375,80.796875L324.9375,80.796875" marker-end="url(#arrowhead30813)" style="fill:none"></path><defs><marker id="arrowhead30813" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dt LE-dm" id="L-dt-dm" style="opacity: 1;"><path class="path" d="M480.296875,80.796875L505.296875,80.796875L530.296875,80.796875" marker-end="url(#arrowhead30814)" style="fill:none"></path><defs><marker id="arrowhead30814" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dm LE-du" id="L-dm-du" style="opacity: 1;"><path class="path" d="M675.890625,80.796875L700.890625,80.796875L725.890625,80.796875" marker-end="url(#arrowhead30815)" style="fill:none"></path><defs><marker id="arrowhead30815" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-du LE-Value" id="L-du-Value" style="opacity: 1;"><path class="path" d="M836.78125,80.796875L861.78125,80.796875L886.78125,80.796875" marker-end="url(#arrowhead30816)" style="fill:none"></path><defs><marker id="arrowhead30816" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-eds-29296" transform="translate(141.46875,80.796875)" style="opacity: 1;"><rect rx="22.5" ry="22.5" x="-133.46875" y="-22.5" width="266.9375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-117.84375,-12.5)"><foreignObject width="235.6875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Encrypted Client-Side Data Store</div></foreignObject></g></g></g><g class="node default" id="flowchart-dt-29297" transform="translate(402.6171875,80.796875)" style="opacity: 1;"><rect rx="22.5" ry="22.5" x="-77.6796875" y="-22.5" width="155.359375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-62.0546875,-12.5)"><foreignObject width="124.109375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Data Transformer</div></foreignObject></g></g></g><g class="node default" id="flowchart-dm-29298" transform="translate(603.09375,80.796875)" style="opacity: 1;"><circle x="-72.796875" y="-22.5" r="72.796875" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-62.796875,-12.5)"><foreignObject width="125.59375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Data Marketplace</div></foreignObject></g></g></g><g class="node default" id="flowchart-du-29299" transform="translate(781.3359375,80.796875)" style="opacity: 1;"><rect rx="0" ry="0" x="-55.4453125" y="-22.5" width="110.890625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-45.4453125,-12.5)"><foreignObject width="90.890625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Data Utilizer</div></foreignObject></g></g></g><g class="node default" id="flowchart-Value-29300" transform="translate(916.1484375,80.796875)" style="opacity: 1;"><rect rx="0" ry="0" x="-29.3671875" y="-22.5" width="58.734375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-19.3671875,-12.5)"><foreignObject width="38.734375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Value</div></foreignObject></g></g></g></g></g></g></svg></div><p><span>The encrypted data store is pretty straight forward, but it&#39;s not so clear what properties the other three components should have besides what has already been stated. Some new technologies have emerged in the past 5 years that can give us some help here.</span></p><h2><a name="background-technologies" class="md-header-anchor"></a><span>Background Technologies</span></h2><p><span>In order to build this market we need a few special technologies which have emerged in the past 5 years.</span></p><p><strong><span>Federated Learning</span></strong></p><p><span>One of the reasons data is valuable is that it&#39;s used to train AI models. Usually if you want to train an AI model you have to have all of the raw training data on a centralized database. Federated learning is different. Instead of pulling possibly private data into a vulnerable central database, it does training on client devices like people&#39;s smartphones and sends model updates to the central server. No private data shared.</span></p><div class="md-diagram-panel"><svg id="mermaidChart385" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="654" style="max-width: 813.15625px; height: 694px;" viewBox="-8 -8 813.15625 654" class="md-require-zoom-fix"><style>#mermaidChart385{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333333;}#mermaidChart385 .error-icon{fill:hsl(60,100%,100%);}#mermaidChart385 .error-text{fill:rgb(0,0,0);stroke:rgb(0,0,0);}#mermaidChart385 .edge-thickness-normal{stroke-width:2px;}#mermaidChart385 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart385 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart385 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart385 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart385 .marker{fill:#000000;}#mermaidChart385 .marker.cross{stroke:#000000;}#mermaidChart385 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart385 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaidChart385 .label text{fill:#333;}#mermaidChart385 .node rect,#mermaidChart385 .node circle,#mermaidChart385 .node ellipse,#mermaidChart385 .node polygon,#mermaidChart385 .node path{fill:#ECECFF;stroke:hsl(240,60%,86.2745098039%);stroke-width:1px;}#mermaidChart385 .node .label{text-align:center;}#mermaidChart385 .node.clickable{cursor:pointer;}#mermaidChart385 .arrowheadPath{fill:undefined;}#mermaidChart385 .edgePath .path{stroke:#000000;stroke-width:1.5px;}#mermaidChart385 .flowchart-link{stroke:#000000;fill:none;}#mermaidChart385 .edgeLabel{background-color:#f4f4f4;text-align:center;}#mermaidChart385 .edgeLabel rect{opacity:0.5;background-color:#f4f4f4;fill:#f4f4f4;}#mermaidChart385 .cluster rect{fill:hsl(60,100%,100%);stroke:hsl(60,60%,90%);stroke-width:1px;}#mermaidChart385 .cluster text{fill:rgb(0,0,0);}#mermaidChart385 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(60,100%,100%);border:1px solid undefined;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart385:root{--mermaid-font-family:sans-serif;}#mermaidChart385:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart385 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"><g class="cluster" id="flowchart-subGraph1-10338" transform="translate(402.578125,160.5)" style="opacity: 1;"><rect width="789.15625" height="305" x="-394.578125" y="-152.5"></rect><g class="label" transform="translate(0, -138.5)" id="mermaidChart385Text"><g transform="translate(-69.8671875,-12.5)"><foreignObject width="139.734375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Federated Learning</div></foreignObject></g></g></g><g class="cluster" id="flowchart-subGraph0-10339" transform="translate(402.578125,485.5)" style="opacity: 1;"><rect width="789.15625" height="305" x="-394.578125" y="-152.5"></rect><g class="label" transform="translate(0, -138.5)" id="mermaidChart385Text"><g transform="translate(-71.671875,-12.5)"><foreignObject width="143.34375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Traditional Learning</div></foreignObject></g></g></g></g><g class="edgePaths"><g class="edgePath LS-cdb LE-tm" id="L-cdb-tm" style="opacity: 1;"><path class="path" d="M375.546875,485.5L458.8671875,485.5L542.1875,485.5" marker-end="url(#arrowhead5004)" style="fill:none"></path><defs><marker id="arrowhead5004" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-c1 LE-cdb" id="L-c1-cdb" style="opacity: 1;"><path class="path" d="M118.3671875,390.5L210.09375,390.5L279.41472905215466,456.364928964539" marker-end="url(#arrowhead5005)" style="fill:none"></path><defs><marker id="arrowhead5005" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-c2 LE-cdb" id="L-c2-cdb" style="opacity: 1;"><path class="path" d="M118.3671875,485.5L210.09375,485.5L279.125,485.5" marker-end="url(#arrowhead5006)" style="fill:none"></path><defs><marker id="arrowhead5006" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-c3 LE-cdb" id="L-c3-cdb" style="opacity: 1;"><path class="path" d="M118.3671875,580.5L210.09375,580.5L279.41472905215466,514.635071035461" marker-end="url(#arrowhead5007)" style="fill:none"></path><defs><marker id="arrowhead5007" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-ca LE-fl" id="L-ca-fl" style="opacity: 1;"><path class="path" d="M358.671875,65.5L458.8671875,65.5L610.2049753289474,138" marker-end="url(#arrowhead5008)" style="fill:none"></path><defs><marker id="arrowhead5008" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-cb LE-fl" id="L-cb-fl" style="opacity: 1;"><path class="path" d="M358.671875,160.5L458.8671875,160.5L546.7578125,160.5" marker-end="url(#arrowhead5009)" style="fill:none"></path><defs><marker id="arrowhead5009" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-cc LE-fl" id="L-cc-fl" style="opacity: 1;"><path class="path" d="M358.671875,255.5L458.8671875,255.5L610.2049753289474,183" marker-end="url(#arrowhead5010)" style="fill:none"></path><defs><marker id="arrowhead5010" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-pa LE-ca" id="L-pa-ca" style="opacity: 1;"><path class="path" d="M141.0625,65.5L210.09375,65.5L296,65.5" marker-end="url(#arrowhead5011)" style="fill:none"></path><defs><marker id="arrowhead5011" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path></marker></defs></g><g class="edgePath LS-pb LE-cb" id="L-pb-cb" style="opacity: 1;"><path class="path" d="M141.0625,160.5L210.09375,160.5L296,160.5" marker-end="url(#arrowhead5012)" style="fill:none"></path><defs><marker id="arrowhead5012" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path></marker></defs></g><g class="edgePath LS-pc LE-cc" id="L-pc-cc" style="opacity: 1;"><path class="path" d="M141.0625,255.5L210.09375,255.5L296,255.5" marker-end="url(#arrowhead5013)" style="fill:none"></path><defs><marker id="arrowhead5013" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(210.09375,390.5)" style="opacity: 1;"><g transform="translate(-44.03125,-12.5)" class="label"><rect rx="0" ry="0" width="88.0625" height="25"></rect><foreignObject width="88.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Private Data</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(210.09375,485.5)" style="opacity: 1;"><g transform="translate(-44.03125,-12.5)" class="label"><rect rx="0" ry="0" width="88.0625" height="25"></rect><foreignObject width="88.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Private Data</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(210.09375,580.5)" style="opacity: 1;"><g transform="translate(-44.03125,-12.5)" class="label"><rect rx="0" ry="0" width="88.0625" height="25"></rect><foreignObject width="88.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Private Data</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(458.8671875,65.5)" style="opacity: 1;"><g transform="translate(-58.3203125,-12.5)" class="label"><rect rx="0" ry="0" width="116.640625" height="25"></rect><foreignObject width="116.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Parameters</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(458.8671875,160.5)" style="opacity: 1;"><g transform="translate(-58.3203125,-12.5)" class="label"><rect rx="0" ry="0" width="116.640625" height="25"></rect><foreignObject width="116.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Parameters</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(458.8671875,255.5)" style="opacity: 1;"><g transform="translate(-58.3203125,-12.5)" class="label"><rect rx="0" ry="0" width="116.640625" height="25"></rect><foreignObject width="116.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Parameters</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-fl-10317" transform="translate(657.171875,160.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-110.4140625" y="-22.5" width="220.828125" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-100.4140625,-12.5)"><foreignObject width="200.828125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Federated AI Model Training</div></foreignObject></g></g></g><g class="node default" id="flowchart-ca-10311" transform="translate(327.3359375,65.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.3359375" y="-22.5" width="62.671875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.3359375,-12.5)"><foreignObject width="42.671875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client</div></foreignObject></g></g></g><g class="node default" id="flowchart-cb-10312" transform="translate(327.3359375,160.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.3359375" y="-22.5" width="62.671875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.3359375,-12.5)"><foreignObject width="42.671875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client</div></foreignObject></g></g></g><g class="node default" id="flowchart-cc-10313" transform="translate(327.3359375,255.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.3359375" y="-22.5" width="62.671875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.3359375,-12.5)"><foreignObject width="42.671875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client</div></foreignObject></g></g></g><g class="node default" id="flowchart-pa-10314" transform="translate(87.03125,65.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-54.03125" y="-22.5" width="108.0625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-44.03125,-12.5)"><foreignObject width="88.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Private Data</div></foreignObject></g></g></g><g class="node default" id="flowchart-pb-10315" transform="translate(87.03125,160.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-54.03125" y="-22.5" width="108.0625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-44.03125,-12.5)"><foreignObject width="88.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Private Data</div></foreignObject></g></g></g><g class="node default" id="flowchart-pc-10316" transform="translate(87.03125,255.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-54.03125" y="-22.5" width="108.0625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-44.03125,-12.5)"><foreignObject width="88.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Private Data</div></foreignObject></g></g></g><g class="node default" id="flowchart-tm-10306" transform="translate(657.171875,485.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-114.984375" y="-22.5" width="229.96875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-104.984375,-12.5)"><foreignObject width="209.96875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Centralized AI Model Training</div></foreignObject></g></g></g><g class="node default" id="flowchart-cdb-10307" label-offset-y="10.88666995977701" transform="translate(327.3359375,485.5)" style="opacity: 1;"><path d="M 0,10.88666995977701 a 48.2109375,10.88666995977701 0,0,0 96.421875 0 a 48.2109375,10.88666995977701 0,0,0 -96.421875 0 l 0,55.88666995977701 a 48.2109375,10.88666995977701 0,0,0 96.421875 0 l 0,-55.88666995977701" transform="translate(-48.2109375,-38.830004939665514)" class="label-container"></path><g class="label" transform="translate(0,0)"><g transform="translate(-38.2109375,-12.5)"><foreignObject width="76.421875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Central DB</div></foreignObject></g></g></g><g class="node default" id="flowchart-c1-10308" transform="translate(87.03125,390.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.3359375" y="-22.5" width="62.671875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.3359375,-12.5)"><foreignObject width="42.671875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client</div></foreignObject></g></g></g><g class="node default" id="flowchart-c2-10309" transform="translate(87.03125,485.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.3359375" y="-22.5" width="62.671875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.3359375,-12.5)"><foreignObject width="42.671875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client</div></foreignObject></g></g></g><g class="node default" id="flowchart-c3-10310" transform="translate(87.03125,580.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.3359375" y="-22.5" width="62.671875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.3359375,-12.5)"><foreignObject width="42.671875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client</div></foreignObject></g></g></g></g></g></g></svg></div><p><strong><span>Ethereum</span></strong></p><p><span>Ethereum allows us to build a transparent market to exchange money for data. The big advantage here is no single entity controls the exchange so there can be no favorites. The way it works is we define a &quot;smart contract&quot;. When a smart contract is activated, it will execute the terms of the contract automatically. </span></p><p><span>The terms are executed by thousands of computers simultaneously. The computers receive some monetary compensation for correctly executing the contract. An attacker that tries to execute the terms of the contract unfairly would need to control more than half of the computers in the network to do so (the popular &quot;51% attack&quot;). This would be staggeringly expensive.</span></p><div class="md-diagram-panel"><svg id="mermaidChart878" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="739" style="max-width: 1044.4296875px; height: 779px;" viewBox="-8 -8 1044.4296875 739" class="md-require-zoom-fix"><style>#mermaidChart878{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333333;}#mermaidChart878 .error-icon{fill:hsl(60,100%,100%);}#mermaidChart878 .error-text{fill:rgb(0,0,0);stroke:rgb(0,0,0);}#mermaidChart878 .edge-thickness-normal{stroke-width:2px;}#mermaidChart878 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart878 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart878 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart878 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart878 .marker{fill:#000000;}#mermaidChart878 .marker.cross{stroke:#000000;}#mermaidChart878 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart878 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaidChart878 .label text{fill:#333;}#mermaidChart878 .node rect,#mermaidChart878 .node circle,#mermaidChart878 .node ellipse,#mermaidChart878 .node polygon,#mermaidChart878 .node path{fill:#ECECFF;stroke:hsl(240,60%,86.2745098039%);stroke-width:1px;}#mermaidChart878 .node .label{text-align:center;}#mermaidChart878 .node.clickable{cursor:pointer;}#mermaidChart878 .arrowheadPath{fill:undefined;}#mermaidChart878 .edgePath .path{stroke:#000000;stroke-width:1.5px;}#mermaidChart878 .flowchart-link{stroke:#000000;fill:none;}#mermaidChart878 .edgeLabel{background-color:#f4f4f4;text-align:center;}#mermaidChart878 .edgeLabel rect{opacity:0.5;background-color:#f4f4f4;fill:#f4f4f4;}#mermaidChart878 .cluster rect{fill:hsl(60,100%,100%);stroke:hsl(60,60%,90%);stroke-width:1px;}#mermaidChart878 .cluster text{fill:rgb(0,0,0);}#mermaidChart878 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(60,100%,100%);border:1px solid undefined;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart878:root{--mermaid-font-family:sans-serif;}#mermaidChart878:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart878 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"><g class="cluster" id="flowchart-subGraph0-28719" transform="translate(518.21484375,365.5)" style="opacity: 1;"><rect width="1020.4296875" height="715" x="-510.21484375" y="-357.5"></rect><g class="label" transform="translate(0, -343.5)" id="mermaidChart878Text"><g transform="translate(-100.0703125,-12.5)"><foreignObject width="200.140625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Ethereum Working Normally</div></foreignObject></g></g></g></g><g class="edgePaths"><g class="edgePath LS-Buyer LE-c1" id="L-Buyer-c1" style="opacity: 1;"><path class="path" d="M114.04296875,78L114.04296875,115.5L453.76171875,165.93182433216066" marker-end="url(#arrowhead30101)" style="fill:none"></path><defs><marker id="arrowhead30101" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Seller LE-c1" id="L-Seller-c1" style="opacity: 1;"><path class="path" d="M927.640625,78L927.640625,115.5L582.66796875,166.05460677587703" marker-end="url(#arrowhead30102)" style="fill:none"></path><defs><marker id="arrowhead30102" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-c1 LE-Network" id="L-c1-Network" style="opacity: 1;"><path class="path" d="M518.21484375,198L518.21484375,223L518.21484375,248" marker-end="url(#arrowhead30103)" style="fill:none"></path><defs><marker id="arrowhead30103" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Network LE-n1" id="L-Network-n1" style="opacity: 1;"><path class="path" d="M478.18359375,275.5835987676884L144.171875,318L144.171875,343" marker-end="url(#arrowhead30104)" style="fill:none"></path><defs><marker id="arrowhead30104" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Network LE-n2" id="L-Network-n2" style="opacity: 1;"><path class="path" d="M518.21484375,293L518.21484375,318L518.21484375,343" marker-end="url(#arrowhead30105)" style="fill:none"></path><defs><marker id="arrowhead30105" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Network LE-n3" id="L-Network-n3" style="opacity: 1;"><path class="path" d="M558.24609375,275.5835987676884L892.2578125,318L892.2578125,343" marker-end="url(#arrowhead30106)" style="fill:none"></path><defs><marker id="arrowhead30106" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-n1 LE-r1" id="L-n1-r1" style="opacity: 1;"><path class="path" d="M144.171875,388L144.171875,413L144.171875,438" marker-end="url(#arrowhead30107)" style="fill:none"></path><defs><marker id="arrowhead30107" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-n2 LE-r2" id="L-n2-r2" style="opacity: 1;"><path class="path" d="M518.21484375,388L518.21484375,413L518.21484375,438" marker-end="url(#arrowhead30108)" style="fill:none"></path><defs><marker id="arrowhead30108" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-n3 LE-r3" id="L-n3-r3" style="opacity: 1;"><path class="path" d="M892.2578125,388L892.2578125,413L892.2578125,438" marker-end="url(#arrowhead30109)" style="fill:none"></path><defs><marker id="arrowhead30109" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-r1 LE-result" id="L-r1-result" style="opacity: 1;"><path class="path" d="M144.171875,483L144.171875,508L362.75390625,535.7578977599081" marker-end="url(#arrowhead30110)" style="fill:none"></path><defs><marker id="arrowhead30110" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-r2 LE-result" id="L-r2-result" style="opacity: 1;"><path class="path" d="M518.21484375,483L518.21484375,508L518.21484375,533" marker-end="url(#arrowhead30111)" style="fill:none"></path><defs><marker id="arrowhead30111" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-r3 LE-result" id="L-r3-result" style="opacity: 1;"><path class="path" d="M892.2578125,483L892.2578125,508L673.67578125,535.7578977599081" marker-end="url(#arrowhead30112)" style="fill:none"></path><defs><marker id="arrowhead30112" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-result LE-nr1" id="L-result-nr1" style="opacity: 1;"><path class="path" d="M377.27783203125,578L142.3828125,615.5L142.3828125,653" marker-end="url(#arrowhead30113)" style="fill:none"></path><defs><marker id="arrowhead30113" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-result LE-nr2" id="L-result-nr2" style="opacity: 1;"><path class="path" d="M518.21484375,578L518.21484375,615.5L518.21484375,653" marker-end="url(#arrowhead30114)" style="fill:none"></path><defs><marker id="arrowhead30114" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-result LE-nr3" id="L-result-nr3" style="opacity: 1;"><path class="path" d="M659.15185546875,578L894.046875,615.5L894.046875,653" marker-end="url(#arrowhead30115)" style="fill:none"></path><defs><marker id="arrowhead30115" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(114.04296875,115.5)" style="opacity: 1;"><g transform="translate(-55.9140625,-12.5)" class="label"><rect rx="0" ry="0" width="111.828125" height="25"></rect><foreignObject width="111.828125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Puts 5 Money In</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(927.640625,115.5)" style="opacity: 1;"><g transform="translate(-43.1484375,-12.5)" class="label"><rect rx="0" ry="0" width="86.296875" height="25"></rect><foreignObject width="86.296875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Puts Data In</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(142.3828125,615.5)" style="opacity: 1;"><g transform="translate(-114.3828125,-12.5)" class="label"><rect rx="0" ry="0" width="228.765625" height="25"></rect><foreignObject width="228.765625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Nodes compensated 0.01 Money</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(518.21484375,615.5)" style="opacity: 1;"><g transform="translate(-114.3828125,-12.5)" class="label"><rect rx="0" ry="0" width="228.765625" height="25"></rect><foreignObject width="228.765625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Nodes compensated 0.01 Money</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(894.046875,615.5)" style="opacity: 1;"><g transform="translate(-114.3828125,-12.5)" class="label"><rect rx="0" ry="0" width="228.765625" height="25"></rect><foreignObject width="228.765625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Nodes compensated 0.01 Money</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-c1-28686" transform="translate(518.21484375,175.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-64.453125" y="-22.5" width="128.90625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-54.453125,-12.5)"><foreignObject width="108.90625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Smart Contract</div></foreignObject></g></g></g><g class="node default" id="flowchart-Buyer-28696" transform="translate(114.04296875,55.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-30.3203125" y="-22.5" width="60.640625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-20.3203125,-12.5)"><foreignObject width="40.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Buyer</div></foreignObject></g></g></g><g class="node default" id="flowchart-Seller-28698" transform="translate(927.640625,55.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-30.40625" y="-22.5" width="60.8125" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-20.40625,-12.5)"><foreignObject width="40.8125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller</div></foreignObject></g></g></g><g class="node default" id="flowchart-Network-28701" transform="translate(518.21484375,270.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-40.03125" y="-22.5" width="80.0625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-30.03125,-12.5)"><foreignObject width="60.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Network</div></foreignObject></g></g></g><g class="node default" id="flowchart-n1-28687" transform="translate(144.171875,365.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-28.21875" y="-22.5" width="56.4375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.21875,-12.5)"><foreignObject width="36.4375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-n2-28688" transform="translate(518.21484375,365.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-28.21875" y="-22.5" width="56.4375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.21875,-12.5)"><foreignObject width="36.4375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-n3-28689" transform="translate(892.2578125,365.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-28.21875" y="-22.5" width="56.4375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.21875,-12.5)"><foreignObject width="36.4375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-r1-28693" transform="translate(144.171875,460.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-101.171875" y="-22.5" width="202.34375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-91.171875,-12.5)"><foreignObject width="182.34375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller Shoud Get 5 Money</div></foreignObject></g></g></g><g class="node default" id="flowchart-r2-28694" transform="translate(518.21484375,460.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-101.171875" y="-22.5" width="202.34375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-91.171875,-12.5)"><foreignObject width="182.34375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller Shoud Get 5 Money</div></foreignObject></g></g></g><g class="node default" id="flowchart-r3-28695" transform="translate(892.2578125,460.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-101.171875" y="-22.5" width="202.34375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-91.171875,-12.5)"><foreignObject width="182.34375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller Shoud Get 5 Money</div></foreignObject></g></g></g><g class="node default" id="flowchart-nr1-28690" transform="translate(142.3828125,675.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-28.21875" y="-22.5" width="56.4375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.21875,-12.5)"><foreignObject width="36.4375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-nr2-28691" transform="translate(518.21484375,675.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-28.21875" y="-22.5" width="56.4375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.21875,-12.5)"><foreignObject width="36.4375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-nr3-28692" transform="translate(894.046875,675.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-28.21875" y="-22.5" width="56.4375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.21875,-12.5)"><foreignObject width="36.4375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-result-28715" transform="translate(518.21484375,555.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-155.4609375" y="-22.5" width="310.921875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-145.4609375,-12.5)"><foreignObject width="290.921875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Concensus Reached: Seller Gets 5 Money</div></foreignObject></g></g></g></g></g></g></svg></div><p><span>Here is an example of Ethereum working normally. </span><strong><span>1st</span></strong><span> buyer puts 5 money into a smart contract and a seller puts in the data that is to be sold. This data can be encrypted or obfuscated in a way that makes the data valuable to the buyer even though it is being shared on a public channel. </span><strong><span>2nd</span></strong><span> the terms of the smart contract are computed by thousands of nodes on the network. Every node should get the same result &quot;Seller should get 5 money&quot;. </span><strong><span>3rd</span></strong><span> concensus is reached and the seller receives 5 money. </span><strong><span>4th</span></strong><span> the nodes receive small compensation for computing the contract.</span></p><div class="md-diagram-panel"><svg id="mermaidChart879" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="739" style="max-width: 826.203125px; height: 779px;" viewBox="-8 -8 826.203125 739" class="md-require-zoom-fix"><style>#mermaidChart879{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333333;}#mermaidChart879 .error-icon{fill:hsl(60,100%,100%);}#mermaidChart879 .error-text{fill:rgb(0,0,0);stroke:rgb(0,0,0);}#mermaidChart879 .edge-thickness-normal{stroke-width:2px;}#mermaidChart879 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart879 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart879 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart879 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart879 .marker{fill:#000000;}#mermaidChart879 .marker.cross{stroke:#000000;}#mermaidChart879 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart879 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaidChart879 .label text{fill:#333;}#mermaidChart879 .node rect,#mermaidChart879 .node circle,#mermaidChart879 .node ellipse,#mermaidChart879 .node polygon,#mermaidChart879 .node path{fill:#ECECFF;stroke:hsl(240,60%,86.2745098039%);stroke-width:1px;}#mermaidChart879 .node .label{text-align:center;}#mermaidChart879 .node.clickable{cursor:pointer;}#mermaidChart879 .arrowheadPath{fill:undefined;}#mermaidChart879 .edgePath .path{stroke:#000000;stroke-width:1.5px;}#mermaidChart879 .flowchart-link{stroke:#000000;fill:none;}#mermaidChart879 .edgeLabel{background-color:#f4f4f4;text-align:center;}#mermaidChart879 .edgeLabel rect{opacity:0.5;background-color:#f4f4f4;fill:#f4f4f4;}#mermaidChart879 .cluster rect{fill:hsl(60,100%,100%);stroke:hsl(60,60%,90%);stroke-width:1px;}#mermaidChart879 .cluster text{fill:rgb(0,0,0);}#mermaidChart879 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(60,100%,100%);border:1px solid undefined;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart879:root{--mermaid-font-family:sans-serif;}#mermaidChart879:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart879 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"><g class="cluster" id="flowchart-subGraph0-28782" transform="translate(409.1015625,365.5)" style="opacity: 1;"><rect width="802.203125" height="715" x="-401.1015625" y="-357.5"></rect><g class="label" transform="translate(0, -343.5)" id="mermaidChart879Text"><g transform="translate(-97.4921875,-12.5)"><foreignObject width="194.984375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Ethereum With a Bad Actor</div></foreignObject></g></g></g></g><g class="edgePaths"><g class="edgePath LS-Buyer LE-c1" id="L-Buyer-c1" style="opacity: 1;"><path class="path" d="M114.04296875,78L114.04296875,115.5L338.35546875,162.1078675396353" marker-end="url(#arrowhead30195)" style="fill:none"></path><defs><marker id="arrowhead30195" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Seller LE-c1" id="L-Seller-c1" style="opacity: 1;"><path class="path" d="M703.12109375,78L703.12109375,115.5L467.26171875,162.62278876170654" marker-end="url(#arrowhead30196)" style="fill:none"></path><defs><marker id="arrowhead30196" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-c1 LE-Network" id="L-c1-Network" style="opacity: 1;"><path class="path" d="M402.80859375,198L402.80859375,223L402.80859375,248" marker-end="url(#arrowhead30197)" style="fill:none"></path><defs><marker id="arrowhead30197" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Network LE-n1" id="L-Network-n1" style="opacity: 1;"><path class="path" d="M362.77734375,277.85195058222956L144.171875,318L144.171875,343" marker-end="url(#arrowhead30198)" style="fill:none"></path><defs><marker id="arrowhead30198" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Network LE-n2" id="L-Network-n2" style="opacity: 1;"><path class="path" d="M399.8277138157895,293L396.515625,318L396.515625,343" marker-end="url(#arrowhead30199)" style="fill:none"></path><defs><marker id="arrowhead30199" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-Network LE-n3" id="L-Network-n3" style="opacity: 1;"><path class="path" d="M442.83984375,277.85195058222956L661.4453125,318L661.4453125,343" marker-end="url(#arrowhead30200)" style="fill:none"></path><defs><marker id="arrowhead30200" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-n1 LE-r1" id="L-n1-r1" style="opacity: 1;"><path class="path" d="M144.171875,388L144.171875,413L144.171875,438" marker-end="url(#arrowhead30201)" style="fill:none"></path><defs><marker id="arrowhead30201" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-n2 LE-r2" id="L-n2-r2" style="opacity: 1;"><path class="path" d="M396.515625,388L396.515625,413L396.515625,438" marker-end="url(#arrowhead30202)" style="fill:none"></path><defs><marker id="arrowhead30202" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-n3 LE-r3" id="L-n3-r3" style="opacity: 1;"><path class="path" d="M661.4453125,388L661.4453125,413L661.4453125,438" marker-end="url(#arrowhead30203)" style="fill:none"></path><defs><marker id="arrowhead30203" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-r1 LE-result" id="L-r1-result" style="opacity: 1;"><path class="path" d="M144.171875,483L144.171875,508L276.984375,533" marker-end="url(#arrowhead30204)" style="fill:none"></path><defs><marker id="arrowhead30204" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-r2 LE-result" id="L-r2-result" style="opacity: 1;"><path class="path" d="M396.515625,483L396.515625,508L396.515625,533" marker-end="url(#arrowhead30205)" style="fill:none"></path><defs><marker id="arrowhead30205" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-r3 LE-result" id="L-r3-result" style="opacity: 1;"><path class="path" d="M661.4453125,483L661.4453125,508L522.008634868421,533" marker-end="url(#arrowhead30206)" style="fill:none"></path><defs><marker id="arrowhead30206" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-result LE-nr1" id="L-result-nr1" style="opacity: 1;"><path class="path" d="M316.6259765625,578L183.4765625,615.5L183.4765625,653" marker-end="url(#arrowhead30207)" style="fill:none"></path><defs><marker id="arrowhead30207" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-result LE-nr2" id="L-result-nr2" style="opacity: 1;"><path class="path" d="M485.8447265625,578L634.7265625,615.5L634.7265625,653" marker-end="url(#arrowhead30208)" style="fill:none"></path><defs><marker id="arrowhead30208" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(114.04296875,115.5)" style="opacity: 1;"><g transform="translate(-55.9140625,-12.5)" class="label"><rect rx="0" ry="0" width="111.828125" height="25"></rect><foreignObject width="111.828125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Puts 5 Money In</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(703.12109375,115.5)" style="opacity: 1;"><g transform="translate(-43.1484375,-12.5)" class="label"><rect rx="0" ry="0" width="86.296875" height="25"></rect><foreignObject width="86.296875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Puts Data In</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(183.4765625,615.5)" style="opacity: 1;"><g transform="translate(-114.3828125,-12.5)" class="label"><rect rx="0" ry="0" width="228.765625" height="25"></rect><foreignObject width="228.765625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Nodes compensated 0.01 Money</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(634.7265625,615.5)" style="opacity: 1;"><g transform="translate(-114.3828125,-12.5)" class="label"><rect rx="0" ry="0" width="228.765625" height="25"></rect><foreignObject width="228.765625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Nodes compensated 0.01 Money</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-c1-28751" transform="translate(402.80859375,175.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-64.453125" y="-22.5" width="128.90625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-54.453125,-12.5)"><foreignObject width="108.90625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Smart Contract</div></foreignObject></g></g></g><g class="node default" id="flowchart-Buyer-28760" transform="translate(114.04296875,55.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-30.3203125" y="-22.5" width="60.640625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-20.3203125,-12.5)"><foreignObject width="40.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Buyer</div></foreignObject></g></g></g><g class="node default" id="flowchart-Seller-28762" transform="translate(703.12109375,55.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-30.40625" y="-22.5" width="60.8125" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-20.40625,-12.5)"><foreignObject width="40.8125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller</div></foreignObject></g></g></g><g class="node default" id="flowchart-Network-28765" transform="translate(402.80859375,270.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-40.03125" y="-22.5" width="80.0625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-30.03125,-12.5)"><foreignObject width="60.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Network</div></foreignObject></g></g></g><g class="node default" id="flowchart-n1-28752" transform="translate(144.171875,365.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-55.3046875" y="-22.5" width="110.609375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-45.3046875,-12.5)"><foreignObject width="90.609375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Honest Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-n2-28753" transform="translate(396.515625,365.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-55.3046875" y="-22.5" width="110.609375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-45.3046875,-12.5)"><foreignObject width="90.609375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Honest Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-n3-28754" transform="translate(661.4453125,365.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-65.484375" y="-22.5" width="130.96875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-55.484375,-12.5)"><foreignObject width="110.96875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Bad Actor Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-r1-28755" transform="translate(144.171875,460.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-101.171875" y="-22.5" width="202.34375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-91.171875,-12.5)"><foreignObject width="182.34375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller Shoud Get 5 Money</div></foreignObject></g></g></g><g class="node default" id="flowchart-r2-28756" transform="translate(396.515625,460.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-101.171875" y="-22.5" width="202.34375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-91.171875,-12.5)"><foreignObject width="182.34375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller Shoud Get 5 Money</div></foreignObject></g></g></g><g class="node default" id="flowchart-r3-28757" transform="translate(661.4453125,460.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-113.7578125" y="-22.5" width="227.515625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-103.7578125,-12.5)"><foreignObject width="207.515625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Seller Shoud Get 1000 Money</div></foreignObject></g></g></g><g class="node default" id="flowchart-nr1-28758" transform="translate(183.4765625,675.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-55.3046875" y="-22.5" width="110.609375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-45.3046875,-12.5)"><foreignObject width="90.609375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Honest Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-nr2-28759" transform="translate(634.7265625,675.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-55.3046875" y="-22.5" width="110.609375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-45.3046875,-12.5)"><foreignObject width="90.609375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Honest Node</div></foreignObject></g></g></g><g class="node default" id="flowchart-result-28779" transform="translate(396.515625,555.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-181.5703125" y="-22.5" width="363.140625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-171.5703125,-12.5)"><foreignObject width="343.140625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Concensus Reached: Seller Should Gets 5 Money</div></foreignObject></g></g></g></g></g></g></svg></div><p><span>Here is an example of Ethereum working with the presence of a bad actor. It&#39;s exactly the same situation as before except the bad actor tries to award the seller more money than what the rest of the network agrees on. The correct consensus is still reached and the bad actor </span><strong><span>is not</span></strong><span> compensated.</span></p><h2><a name="architecture" class="md-header-anchor"></a><span>Architecture</span></h2><p><span>Now let&#39;s take these technologies and apply them to our basic idea. This application of technologies to this problem is what I call &quot;The Data Wallet&quot;.</span></p><ul><li><strong><span>Encrypted Client-Side Data Store:</span></strong><span> As stated before this is straightforward. No special tool needed here.</span></li><li><strong><span>Privacy Preserving Data Transformer:</span></strong><span> Applying </span><u><span>Federated Learning</span></u><span> technology we can transform the private data into something useful while maintaining privacy. Federated Learning techniques allow us to build the data transformer component.</span></li><li><strong><span>Data Marketplace:</span></strong><span> Applying an </span><u><span>Ethereum Smart Contract</span></u><span> gives us the data marketplace that we need to efficiently exchange money for data utility. Ethereum&#39;s decentralized property means the market will never play favorites. Ethereum&#39;s transparent property allows price competition.</span></li><li><strong><span>Data Utilizer:</span></strong><span> Applying </span><u><span>Federated Learning</span></u><span> technology we can use the transformed data to train artificial intelligence which can in turn be used to produce value.</span></li></ul><div class="md-diagram-panel"><svg id="mermaidChart1170" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="564.59375" style="max-width: 1436.515625px; height: 604.59375px;" viewBox="-8 -8 1436.515625 564.59375" class="md-require-zoom-fix"><style>#mermaidChart1170{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333333;}#mermaidChart1170 .error-icon{fill:hsl(60,100%,100%);}#mermaidChart1170 .error-text{fill:rgb(0,0,0);stroke:rgb(0,0,0);}#mermaidChart1170 .edge-thickness-normal{stroke-width:2px;}#mermaidChart1170 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart1170 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart1170 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart1170 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart1170 .marker{fill:#000000;}#mermaidChart1170 .marker.cross{stroke:#000000;}#mermaidChart1170 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart1170 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaidChart1170 .label text{fill:#333;}#mermaidChart1170 .node rect,#mermaidChart1170 .node circle,#mermaidChart1170 .node ellipse,#mermaidChart1170 .node polygon,#mermaidChart1170 .node path{fill:#ECECFF;stroke:hsl(240,60%,86.2745098039%);stroke-width:1px;}#mermaidChart1170 .node .label{text-align:center;}#mermaidChart1170 .node.clickable{cursor:pointer;}#mermaidChart1170 .arrowheadPath{fill:undefined;}#mermaidChart1170 .edgePath .path{stroke:#000000;stroke-width:1.5px;}#mermaidChart1170 .flowchart-link{stroke:#000000;fill:none;}#mermaidChart1170 .edgeLabel{background-color:#f4f4f4;text-align:center;}#mermaidChart1170 .edgeLabel rect{opacity:0.5;background-color:#f4f4f4;fill:#f4f4f4;}#mermaidChart1170 .cluster rect{fill:hsl(60,100%,100%);stroke:hsl(60,60%,90%);stroke-width:1px;}#mermaidChart1170 .cluster text{fill:rgb(0,0,0);}#mermaidChart1170 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(60,100%,100%);border:1px solid undefined;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart1170:root{--mermaid-font-family:sans-serif;}#mermaidChart1170:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart1170 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"><g class="cluster" id="flowchart-subGraph1-34209" transform="translate(714.2578125,115.796875)" style="opacity: 1;"><rect width="1412.515625" height="215.59375" x="-706.2578125" y="-107.796875"></rect><g class="label" transform="translate(0, -93.796875)" id="mermaidChart1170Text"><g transform="translate(-35.875,-12.5)"><foreignObject width="71.75" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Basic Idea</div></foreignObject></g></g></g><g class="cluster" id="flowchart-subGraph0-34210" transform="translate(714.2578125,396.09375)" style="opacity: 1;"><rect width="1412.515625" height="305" x="-706.2578125" y="-152.5"></rect><g class="label" transform="translate(0, -138.5)" id="mermaidChart1170Text"><g transform="translate(-151.8984375,-12.5)"><foreignObject width="303.796875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Federated Learning and Ethereum Applied</div></foreignObject></g></g></g></g><g class="edgePaths"><g class="edgePath LS-ca LE-da" id="L-ca-da" style="opacity: 1;"><path class="path" d="M294.3125,301.09375L324.9375,301.09375L349.9375,301.09375" marker-end="url(#arrowhead38675)" style="fill:none"></path><defs><marker id="arrowhead38675" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-cb LE-db" id="L-cb-db" style="opacity: 1;"><path class="path" d="M294.3125,396.09375L324.9375,396.09375L349.9375,396.09375" marker-end="url(#arrowhead38676)" style="fill:none"></path><defs><marker id="arrowhead38676" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-cc LE-dc" id="L-cc-dc" style="opacity: 1;"><path class="path" d="M294.3125,491.09375L324.9375,491.09375L349.9375,491.09375" marker-end="url(#arrowhead38677)" style="fill:none"></path><defs><marker id="arrowhead38677" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-da LE-dmA" id="L-da-dmA" style="opacity: 1;"><path class="path" d="M648.5625,301.09375L731.8828125,301.09375L826.4307266629486,349.68231547297165" marker-end="url(#arrowhead38678)" style="fill:none"></path><defs><marker id="arrowhead38678" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-db LE-dmA" id="L-db-dmA" style="opacity: 1;"><path class="path" d="M648.5625,396.09375L731.8828125,396.09375L815.203125,396.09375" marker-end="url(#arrowhead38679)" style="fill:none"></path><defs><marker id="arrowhead38679" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dc LE-dmA" id="L-dc-dmA" style="opacity: 1;"><path class="path" d="M648.5625,491.09375L731.8828125,491.09375L826.4307266629486,442.50518452702835" marker-end="url(#arrowhead38680)" style="fill:none"></path><defs><marker id="arrowhead38680" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dmA LE-fl" id="L-dmA-fl" style="opacity: 1;"><path class="path" d="M1018.28125,396.09375L1043.28125,396.09375L1068.28125,396.09375" marker-end="url(#arrowhead38681)" style="fill:none"></path><defs><marker id="arrowhead38681" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-eds LE-dt" id="L-eds-dt" style="opacity: 1;"><path class="path" d="M299.9375,115.796875L324.9375,115.796875L421.5703125,115.796875" marker-end="url(#arrowhead38682)" style="fill:none"></path><defs><marker id="arrowhead38682" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dt LE-dm" id="L-dt-dm" style="opacity: 1;"><path class="path" d="M576.9296875,115.796875L731.8828125,115.796875L843.9453125,115.796875" marker-end="url(#arrowhead38683)" style="fill:none"></path><defs><marker id="arrowhead38683" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dm LE-du" id="L-dm-du" style="opacity: 1;"><path class="path" d="M989.5390625,115.796875L1043.28125,115.796875L1176.453125,115.796875" marker-end="url(#arrowhead38684)" style="fill:none"></path><defs><marker id="arrowhead38684" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(731.8828125,301.09375)" style="opacity: 1;"><g transform="translate(-58.3203125,-12.5)" class="label"><rect rx="0" ry="0" width="116.640625" height="25"></rect><foreignObject width="116.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Parameters</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(731.8828125,396.09375)" style="opacity: 1;"><g transform="translate(-58.3203125,-12.5)" class="label"><rect rx="0" ry="0" width="116.640625" height="25"></rect><foreignObject width="116.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Parameters</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(731.8828125,491.09375)" style="opacity: 1;"><g transform="translate(-58.3203125,-12.5)" class="label"><rect rx="0" ry="0" width="116.640625" height="25"></rect><foreignObject width="116.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Parameters</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-du-34208" transform="translate(1231.8984375,115.796875)" style="opacity: 1;"><rect rx="0" ry="0" x="-55.4453125" y="-22.5" width="110.890625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-45.4453125,-12.5)"><foreignObject width="90.890625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Data Utilizer</div></foreignObject></g></g></g><g class="node default" id="flowchart-dm-34207" transform="translate(916.7421875,115.796875)" style="opacity: 1;"><circle x="-72.796875" y="-22.5" r="72.796875" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-62.796875,-12.5)"><foreignObject width="125.59375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Data Marketplace</div></foreignObject></g></g></g><g class="node default" id="flowchart-dt-34206" transform="translate(499.25,115.796875)" style="opacity: 1;"><rect rx="22.5" ry="22.5" x="-77.6796875" y="-22.5" width="155.359375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-62.0546875,-12.5)"><foreignObject width="124.109375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Data Transformer</div></foreignObject></g></g></g><g class="node default" id="flowchart-eds-34205" transform="translate(166.46875,115.796875)" style="opacity: 1;"><rect rx="22.5" ry="22.5" x="-133.46875" y="-22.5" width="266.9375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-117.84375,-12.5)"><foreignObject width="235.6875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Encrypted Client-Side Data Store</div></foreignObject></g></g></g><g class="node default" id="flowchart-ca-34187" transform="translate(166.46875,301.09375)" style="opacity: 1;"><rect rx="0" ry="0" x="-127.84375" y="-22.5" width="255.6875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-117.84375,-12.5)"><foreignObject width="235.6875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Encrypted Client-Side Data Store</div></foreignObject></g></g></g><g class="node default" id="flowchart-cb-34188" transform="translate(166.46875,396.09375)" style="opacity: 1;"><rect rx="0" ry="0" x="-127.84375" y="-22.5" width="255.6875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-117.84375,-12.5)"><foreignObject width="235.6875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Encrypted Client-Side Data Store</div></foreignObject></g></g></g><g class="node default" id="flowchart-cc-34189" transform="translate(166.46875,491.09375)" style="opacity: 1;"><rect rx="0" ry="0" x="-127.84375" y="-22.5" width="255.6875" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-117.84375,-12.5)"><foreignObject width="235.6875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Encrypted Client-Side Data Store</div></foreignObject></g></g></g><g class="node default" id="flowchart-da-34190" transform="translate(499.25,301.09375)" style="opacity: 1;"><rect rx="0" ry="0" x="-149.3125" y="-22.5" width="298.625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-139.3125,-12.5)"><foreignObject width="278.625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client Side Training - Data Transformer</div></foreignObject></g></g></g><g class="node default" id="flowchart-db-34191" transform="translate(499.25,396.09375)" style="opacity: 1;"><rect rx="0" ry="0" x="-149.3125" y="-22.5" width="298.625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-139.3125,-12.5)"><foreignObject width="278.625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client Side Training - Data Transformer</div></foreignObject></g></g></g><g class="node default" id="flowchart-dc-34192" transform="translate(499.25,491.09375)" style="opacity: 1;"><rect rx="0" ry="0" x="-149.3125" y="-22.5" width="298.625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-139.3125,-12.5)"><foreignObject width="278.625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Client Side Training - Data Transformer</div></foreignObject></g></g></g><g class="node default" id="flowchart-fl-34193" transform="translate(1231.8984375,396.09375)" style="opacity: 1;"><rect rx="0" ry="0" x="-163.6171875" y="-22.5" width="327.234375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-153.6171875,-12.5)"><foreignObject width="307.234375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Federated AI Model Training - Data Utilizer</div></foreignObject></g></g></g><g class="node default" id="flowchart-dmA-34203" transform="translate(916.7421875,396.09375)" style="opacity: 1;"><circle x="-101.5390625" y="-22.5" r="101.5390625" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-91.5390625,-12.5)"><foreignObject width="183.078125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Ethereum Smart Contract</div></foreignObject></g></g></g></g></g></g></svg></div><h2><a name="marketplace-implementation" class="md-header-anchor"></a><span>Marketplace Implementation</span></h2><p><span>Everything centers on the smart contract so let&#39;s start there. Here is how the contract should work.</span></p><ol><li><span>The buyer requests data from a specific seller. The request has information regarding how to fill the request and comes </span><strong><span>pre-paid</span></strong><span>.</span></li><li><span>The seller can only have one active data request directed at them at a time.</span></li><li><span>The seller fulfills the request by posting the new data to the network (can be encrypted or obfuscated).</span></li><li><span>The seller receives funds.</span></li></ol><p><em><span>If the seller doesn&#39;t want to fulfill the request</span></em><span>:</span></p><ol><li><span>The seller denies the request.</span></li><li><span>The request is no longer active.</span></li><li><span>The buyer receives their payment back.</span></li></ol><p><em><span>If another buyer wants to make a request to a seller with an active request:</span></em></p><ol><li><span>The second buyer offers a request at a higher price and the rest of the steps above apply.</span></li><li><span>The original request is no longer active.</span></li><li><span>The first buyer receives their payment back.</span></li></ol><h3><a name="the-escrow-contract" class="md-header-anchor"></a><span>The Escrow Contract</span></h3><p><span>In order for prepayment to work and ensure funds are always available for the transaction we need an escrow contract. I&#39;ve used the Solidity language to implement the contracts. The contract is created with a </span><strong><span>buyer</span></strong><span> and a </span><strong><span>seller</span></strong><span> and has 3 operations</span></p><ul><li><span>deposit() - The buyer puts money into the contract. The contract now holds the money and the contract is AWAITING_DELIVERY.</span></li><li><span>confirmDelivery()  - Delivery is confirmed and funds are transferred from the contract to the seller. The contract is now COMPLETE.</span></li><li><span>refundBuyer() - Someone decides to back out of the contract and the buyer receives funds back. The contract is now COMPLETE.</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c#" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span> <span class="cm-variable">TDWEscrow</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">enum</span> <span class="cm-variable">State</span> { <span class="cm-variable">AWAITING_PAYMENT</span>, <span class="cm-variable">AWAITING_DELIVERY</span>, <span class="cm-variable">COMPLETE</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">State</span> <span class="cm-keyword">public</span> <span class="cm-variable">currState</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">payable</span> <span class="cm-keyword">public</span> <span class="cm-variable">buyer</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">payable</span> <span class="cm-keyword">public</span> <span class="cm-variable">seller</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">constructor</span>(<span class="cm-variable">address</span> <span class="cm-variable">payable</span> <span class="cm-variable">_buyer</span>, <span class="cm-variable">address</span> <span class="cm-variable">payable</span> <span class="cm-variable">_seller</span>) <span class="cm-keyword">public</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">buyer</span> <span class="cm-operator">=</span> <span class="cm-variable">_buyer</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">seller</span> <span class="cm-operator">=</span> <span class="cm-variable">_seller</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">function</span> <span class="cm-variable">deposit</span>() <span class="cm-variable">external</span> <span class="cm-variable">payable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">currState</span> <span class="cm-operator">==</span> <span class="cm-variable">State</span>.<span class="cm-variable">AWAITING_PAYMENT</span>, <span class="cm-string">"Already paid"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currState</span> <span class="cm-operator">=</span> <span class="cm-variable">State</span>.<span class="cm-variable">AWAITING_DELIVERY</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">function</span> <span class="cm-variable">confirmDelivery</span>() <span class="cm-variable">external</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">currState</span> <span class="cm-operator">==</span> <span class="cm-variable">State</span>.<span class="cm-variable">AWAITING_DELIVERY</span>, <span class="cm-string">"Cannot confirm delivery"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">seller</span>.<span class="cm-variable">transfer</span>(<span class="cm-variable">address</span>(<span class="cm-keyword">this</span>).<span class="cm-variable">balance</span>);</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currState</span> <span class="cm-operator">=</span> <span class="cm-variable">State</span>.<span class="cm-variable">COMPLETE</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">function</span> <span class="cm-variable">refundBuyer</span>() <span class="cm-variable">external</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">currState</span> <span class="cm-operator">==</span> <span class="cm-variable">State</span>.<span class="cm-variable">AWAITING_DELIVERY</span>, <span class="cm-string">"Cannot refund buyer"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">buyer</span>.<span class="cm-variable">transfer</span>(<span class="cm-variable">address</span>(<span class="cm-keyword">this</span>).<span class="cm-variable">balance</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currState</span> <span class="cm-operator">=</span> <span class="cm-variable">State</span>.<span class="cm-variable">COMPLETE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 660px;"></div><div class="CodeMirror-gutters" style="display: none; height: 660px;"></div></div></div></pre><h3><a name="the-main-contract" class="md-header-anchor"></a><span>The Main Contract</span></h3><p><span>Now that we have the escrow contract we can build our main contract that form the backbone of our marketplace. First we&#39;ll look at the structure of the request.</span></p><p><strong><span>DeltaRequest</span></strong><span> </span></p><p><span>A buyer is requesting an update for their model (aka a delta). This request has quite a bit of data attached to it for various purposes.</span></p><ul><li><span>from - Who created the request.</span></li><li><span>to - Who the request is directed at.</span></li><li><span>amount - How much money will be paid for fulfilling the request.</span></li><li><span>requestID - A unique ID associated with this request.</span></li><li><span>modelJSON - The data necessary for the seller to properly compute the Delta to fulfill the request.</span></li><li><span>metaData - Metadata about the request that can be used to compare different requests on the market. For instance a model that uses more features for training might be fetch a higher price on the market. This info can facilitate competition on the market.</span></li><li><span>escrow - An instance of the Escrow contract that is created when the delta request is created. </span></li></ul><pre lang="c++" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">struct</span> <span class="cm-def">DeltaRequest</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">from</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">to</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">amount</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">requestID</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">string</span> <span class="cm-variable">modelJson</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TrainingMetaData</span> <span class="cm-variable">metaData</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TDWEscrow</span> <span class="cm-variable">escrow</span>;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">struct</span> <span class="cm-def">TrainingMetaData</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint32</span> <span class="cm-variable">numberOfFeatures</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TrainingType</span> <span class="cm-variable">trainingType</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">enum</span> <span class="cm-def">TrainingType</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">EMPTY</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">STOCHASTIC_GRADIENT_DESCENT</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">GRADIENT_BOOSTING_DECISION_TREE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 440px;"></div><div class="CodeMirror-gutters" style="display: none; height: 440px;"></div></div></div></pre><p><strong><span>Events</span></strong></p><p><span>In addition to the DeltaRequest we also broadcast events to the marketplace.</span></p><ul><li><span>Delta - When a seller fulfills a request a &quot;Delta&quot; is broadcast to the marketplace indicating the price that was paid and some meta data for what kind of data was exchanged. This effectively creates a price quote. There is also a flag that indicates whether the buyer correctly indicated the metadata in the initial request.</span></li><li><span>RequestWasOutbid - Emitted when another buyer requests data from a seller at a higher price.</span></li><li><span>RequestWasDenied - Emitted when the seller denies the request. The seller can indicate the price they want to be paid.</span></li></ul><pre lang="" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span>event RequestWasOutbid(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  uint256 _requestID,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  uint256 _oldAmount,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  uint256 _newAmount</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  event RequestWasDenied(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  uint256 _requestID,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  uint256 _oldAmount,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  uint256 _desiredAmount</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  event Delta(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  address indexed _from,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  address indexed _to,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  string _deltaJson,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  uint256 _amountPaid,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  TrainingMetaData _metaData,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  bool _didTrainingMetaDataMatch</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 396px;"></div><div class="CodeMirror-gutters" style="display: none; height: 396px;"></div></div></div></pre><p><span>Now we have the basic building blocks for our smart contract. Let&#39;s put them together with some methods for interacting with the smart contract.</span></p><p><strong><span>getActiveRequest</span></strong></p><p><span>Simple method that returns the caller&#39;s active request. Only one can be active at a time.</span></p><pre lang="c++" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">function</span> <span class="cm-def">getActiveRequest</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">public</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">view</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">returns</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">address</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">string</span> <span class="cm-variable">memory</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">DeltaRequest</span> <span class="cm-variable">memory</span> <span class="cm-variable">activeRequest</span> <span class="cm-operator">=</span> <span class="cm-variable">activeRequests</span>[<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequest</span>.<span class="cm-variable">from</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequest</span>.<span class="cm-variable">modelJson</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequest</span>.<span class="cm-variable">requestID</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 352px;"></div><div class="CodeMirror-gutters" style="display: none; height: 352px;"></div></div></div></pre><p><strong><span>requestDelta()</span></strong></p><p><span>This method has 4 steps:</span></p><ol><li><strong><span>Verfication</span></strong><span> -  If the receiver has a higher value active request, the new request is automatically rejected.</span></li><li><strong><span>Refund outstanding requests</span></strong><span> - If an outstanding request exists, refund the original buyer. A </span><u><span>RequestwasOutbid</span></u><span> even is published.</span></li><li><strong><span>Create request</span></strong><span> - Creates the escrow contract and the DeltaRequest. All the necessary info to create the request was passed in as arguments to the method.</span></li><li><strong><span>Fund</span></strong><span> - Funds are transferred from the buyer to be held by the escrow contract.</span></li></ol><pre lang="c++" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">function</span> <span class="cm-def">requestDelta</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">payable</span> <span class="cm-variable">receiver</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">string</span> <span class="cm-variable">memory</span> <span class="cm-variable">modelJson</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TrainingType</span> <span class="cm-variable">trainingType</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint32</span> <span class="cm-variable">numberOfFeatures</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ) <span class="cm-keyword">public</span> <span class="cm-variable">payable</span> <span class="cm-def">returns</span> (<span class="cm-variable">uint256</span> <span class="cm-variable">requestID</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">amount</span> <span class="cm-operator">=</span> <span class="cm-variable">msg</span>.<span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">DeltaRequest</span> <span class="cm-variable">memory</span> <span class="cm-variable">activeRequest</span> <span class="cm-operator">=</span> <span class="cm-variable">activeRequests</span>[<span class="cm-variable">receiver</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Verify request.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">activeRequest</span>.<span class="cm-variable">requestID</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">activeRequest</span>.<span class="cm-variable">amount</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">amount</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Cancel current request if new amount is higher.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">activeRequest</span>.<span class="cm-variable">amount</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">oldAmount</span> <span class="cm-operator">=</span> <span class="cm-variable">activeRequest</span>.<span class="cm-variable">amount</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequest</span>.<span class="cm-variable">escrow</span>.<span class="cm-variable">refundBuyer</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">RequestWasOutbid</span>(<span class="cm-variable">activeRequest</span>.<span class="cm-variable">requestID</span>, <span class="cm-variable">oldAmount</span>, <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Create Request.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">generatedRequestID</span> <span class="cm-operator">=</span> <span class="cm-variable">monotonicIncrementer</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">monotonicIncrementer</span> <span class="cm-operator">+=</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TDWEscrow</span> <span class="cm-variable">escrow</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">TDWEscrow</span>(<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>, <span class="cm-variable">receiver</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequests</span>[<span class="cm-variable">receiver</span>] <span class="cm-operator">=</span> <span class="cm-variable">DeltaRequest</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">receiver</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">amount</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">generatedRequestID</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">modelJson</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TrainingMetaData</span>(<span class="cm-variable">numberOfFeatures</span>, <span class="cm-variable">trainingType</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">escrow</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  );</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Deposit value to escrow.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">escrow</span>.<span class="cm-variable">deposit</span>.<span class="cm-variable">value</span>(<span class="cm-variable">amount</span>)();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">generatedRequestID</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 880px;"></div><div class="CodeMirror-gutters" style="display: none; height: 880px;"></div></div></div></pre><p><strong><span>publishDelta()</span></strong></p><p><span>This method has 3 steps:</span></p><ol><li><strong><span>Verification</span></strong><span> - ensure the request that is being fulfilled is active.</span></li><li><strong><span>Create the publish delta</span></strong><span> - All the necessary information was passed in as method arguments.</span></li><li><strong><span>Confirm Delivery</span></strong><span> - Funds are transferred from the escrow contract to the seller.</span></li></ol><pre lang="c++" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">function</span> <span class="cm-def">publishDelta</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">receiver</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">string</span> <span class="cm-variable">memory</span> <span class="cm-variable">deltaJson</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">requestID</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TrainingType</span> <span class="cm-variable">trainingType</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint32</span> <span class="cm-variable">numberOfFeatures</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ) <span class="cm-keyword">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable-3">bool</span> <span class="cm-variable">validFulfillment</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Only publish an active request.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">DeltaRequest</span> <span class="cm-variable">memory</span> <span class="cm-variable">request</span> <span class="cm-operator">=</span> <span class="cm-variable">activeRequests</span>[<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">request</span>.<span class="cm-variable">requestID</span> <span class="cm-operator">!=</span> <span class="cm-variable">requestID</span>) <span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Create and publish delta.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">bool</span> <span class="cm-variable">didTrainingMetaDataMatchRequest</span> <span class="cm-operator">=</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">request</span>.<span class="cm-variable">metaData</span>.<span class="cm-variable">trainingType</span> <span class="cm-operator">==</span> <span class="cm-variable">trainingType</span> <span class="cm-operator">&amp;&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">request</span>.<span class="cm-variable">metaData</span>.<span class="cm-variable">numberOfFeatures</span> <span class="cm-operator">==</span> <span class="cm-variable">numberOfFeatures</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequests</span>[<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>] <span class="cm-operator">=</span> <span class="cm-variable">EMPTY_REQUEST</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">Delta</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">receiver</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">deltaJson</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">request</span>.<span class="cm-variable">amount</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TrainingMetaData</span>(<span class="cm-variable">numberOfFeatures</span>, <span class="cm-variable">trainingType</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">didTrainingMetaDataMatchRequest</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Deliver funds to delta sender.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">request</span>.<span class="cm-variable">escrow</span>.<span class="cm-variable">confirmDelivery</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 682px;"></div><div class="CodeMirror-gutters" style="display: none; height: 682px;"></div></div></div></pre><p><strong><span>denyActiveRequest</span></strong></p><p><span>This method is used when a seller wants to deny a request from a buyer. It has 4 steps:</span></p><ol><li><strong><span>Verification</span></strong><span> - ensure the request that is being denied is active and the caller is the owner. Also the counter offer should be higher than the amount offered</span></li><li><strong><span>Clear Active Request</span></strong><span> -  This frees up the user for more requests to be sent. </span></li><li><strong><span>Publish Request Denied Event</span></strong><span> - All the necessary information was passed in as method arguments.</span></li><li><strong><span>Refund the Buyer</span></strong><span> - Funds are transferred from the escrow contract to the buyer.</span></li></ol><pre lang="c++" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">function</span> <span class="cm-def">denyActiveRequest</span>(<span class="cm-variable">uint256</span> <span class="cm-variable">requestID</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">desiredAmount</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">public</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">returns</span> (<span class="cm-variable-3">bool</span> <span class="cm-variable">success</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">DeltaRequest</span> <span class="cm-variable">memory</span> <span class="cm-variable">activeRequest</span> <span class="cm-operator">=</span> <span class="cm-variable">activeRequests</span>[<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Can only cancel your own request.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">activeRequest</span>.<span class="cm-variable">requestID</span> <span class="cm-operator">!=</span> <span class="cm-variable">requestID</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Cannot make smaller counter-offer.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">desiredAmount</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">activeRequest</span>.<span class="cm-variable">amount</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Clear active request.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequests</span>[<span class="cm-variable">msg</span>.<span class="cm-variable">sender</span>] <span class="cm-operator">=</span> <span class="cm-variable">EMPTY_REQUEST</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Publish request denied event.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">RequestWasDenied</span>(<span class="cm-variable">requestID</span>, <span class="cm-variable">activeRequest</span>.<span class="cm-variable">amount</span>, <span class="cm-variable">desiredAmount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Refund delta requester.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">activeRequest</span>.<span class="cm-variable">escrow</span>.<span class="cm-variable">refundBuyer</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 594px;"></div><div class="CodeMirror-gutters" style="display: none; height: 594px;"></div></div></div></pre><h3><a name="how-it-works-together" class="md-header-anchor"></a><span>How it works together</span></h3><p><span>That&#39;s it! We only needed about 200 lines of code the marketplace component.</span></p><p><span>To see how this works together we can write some tests. Let&#39;s see what a simple flow looks like:</span></p><ol><li><span>Buyer requests a delta from a seller.</span></li><li><span>Seller publishes a delta via the smart contract.</span></li><li><span>Buyer reads the delta from the updates and updates their model.</span></li></ol><pre lang="typescript" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span>(<span class="cm-string">'TheDataWalletWorkflowSimple'</span>, (<span class="cm-def">accounts</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">it</span>(<span class="cm-string">'should send delta and compute deltas correctly'</span>, <span class="cm-keyword">async</span> () <span class="cm-operator">=&gt;</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">/**</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span>  * Setup...</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span>  */</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testConsumer</span>.<span class="cm-property">requestDelta</span>(<span class="cm-variable">clientAccount</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testClient</span>.<span class="cm-property">publishDelta</span>();</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testConsumer</span>.<span class="cm-property">trainModel</span>();</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">resultModel</span> <span class="cm-operator">=</span> <span class="cm-variable">testConsumer</span>.<span class="cm-property">getCurrentModel</span>();</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span> &nbsp; &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span>  * Asserts...</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span>  */</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 330px;"></div><div class="CodeMirror-gutters" style="display: none; height: 330px;"></div></div></div></pre><p><span>We can also test the scenarios where one buyer outbids another and when the seller denies a request.</span></p><pre lang="typescript" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">it</span>(<span class="cm-string">'should have a mechanism for consumers to stop actors trying to disrupt normal exchange by spamming at low prices'</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">async</span> () <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  * Setup...</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  */</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testDenialOfServiceAttacker</span>.<span class="cm-property">requestDelta</span>(<span class="cm-variable">clientAccount</span>, <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testConsumer</span>.<span class="cm-property">requestDelta</span>(<span class="cm-variable">clientAccount</span>, <span class="cm-number">100</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// See log for request outbid.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">pastEvents</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">theDataWalletInstance</span>.<span class="cm-property">getPastEvents</span>(<span class="cm-string">"RequestWasOutbid"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">assert</span>.<span class="cm-property">equal</span>(<span class="cm-variable-2">pastEvents</span>.<span class="cm-property">length</span>, <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testClient</span>.<span class="cm-property">publishDelta</span>();</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  * Asserts...</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  */</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">it</span>(<span class="cm-string">'should allow clients to deny a request.'</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">async</span> () <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  * Setup...</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  */</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testConsumer</span>.<span class="cm-property">requestDelta</span>(<span class="cm-variable">clientAccount</span>, <span class="cm-number">50</span>);</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">testClient</span>.<span class="cm-property">denyActiveRequest</span>(<span class="cm-number">100</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">pastEvents</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">theDataWalletInstance</span>.<span class="cm-property">getPastEvents</span>(<span class="cm-string">"RequestWasDenied"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">assert</span>.<span class="cm-property">equal</span>(<span class="cm-variable-2">pastEvents</span>[<span class="cm-number">0</span>].<span class="cm-property">returnValues</span>.<span class="cm-property">_desiredAmount</span>, <span class="cm-number">100</span>);</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  * Asserts...</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  */</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 682px;"></div><div class="CodeMirror-gutters" style="display: none; height: 682px;"></div></div></div></pre><h2><a name="client-side-training--data-transformer-implementation" class="md-header-anchor"></a><span>Client Side Training / Data Transformer Implementation</span></h2><p><span>The next core component is the data transformer. We&#39;re going to use the most basic federated learning technique to build the most basic model but of course this architecture can support more complicated models and learning techniques. Let&#39;s say our buyer is </span><u><span>building a model that predicts a human&#39;s weight given their height.</span></u><span> The model is a linear regression with a single feature and the learning technique is called Stochastic Gradient Descent (SGD). SGD is a function with inputs and outputs. </span></p><p><span>SGD Inputs</span></p><ul><li><span>An approximate linear model consisting of 2 numbers a slope, an intercept. This is provided by the buyer.</span></li><li><span>A constant called the &quot;learning rate&quot;. This is provided by the buyer.</span></li><li><strong><span>A sample data point</span></strong><span>. This is private data and is provided by the seller.</span></li></ul><p><span>SGD Outputs</span></p><ul><li><span>A better model consisting of a better slope and a better intercept. This is computed by the seller and returned to the buyer.</span></li></ul><div class="md-diagram-panel"><svg id="mermaidChart1329" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="627.71875" style="max-width: 1001.21875px; height: 667.71875px;" viewBox="-8 -8 1001.21875 627.71875" class="md-require-zoom-fix"><style>#mermaidChart1329{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333333;}#mermaidChart1329 .error-icon{fill:hsl(60,100%,100%);}#mermaidChart1329 .error-text{fill:rgb(0,0,0);stroke:rgb(0,0,0);}#mermaidChart1329 .edge-thickness-normal{stroke-width:2px;}#mermaidChart1329 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart1329 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart1329 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart1329 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart1329 .marker{fill:#000000;}#mermaidChart1329 .marker.cross{stroke:#000000;}#mermaidChart1329 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart1329 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaidChart1329 .label text{fill:#333;}#mermaidChart1329 .node rect,#mermaidChart1329 .node circle,#mermaidChart1329 .node ellipse,#mermaidChart1329 .node polygon,#mermaidChart1329 .node path{fill:#ECECFF;stroke:hsl(240,60%,86.2745098039%);stroke-width:1px;}#mermaidChart1329 .node .label{text-align:center;}#mermaidChart1329 .node.clickable{cursor:pointer;}#mermaidChart1329 .arrowheadPath{fill:undefined;}#mermaidChart1329 .edgePath .path{stroke:#000000;stroke-width:1.5px;}#mermaidChart1329 .flowchart-link{stroke:#000000;fill:none;}#mermaidChart1329 .edgeLabel{background-color:#f4f4f4;text-align:center;}#mermaidChart1329 .edgeLabel rect{opacity:0.5;background-color:#f4f4f4;fill:#f4f4f4;}#mermaidChart1329 .cluster rect{fill:hsl(60,100%,100%);stroke:hsl(60,60%,90%);stroke-width:1px;}#mermaidChart1329 .cluster text{fill:rgb(0,0,0);}#mermaidChart1329 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(60,100%,100%);border:1px solid undefined;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart1329:root{--mermaid-font-family:sans-serif;}#mermaidChart1329:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart1329 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"><g class="cluster" id="flowchart-subGraph1-38084" transform="translate(206.6171875,309.859375)" style="opacity: 1;"><rect width="397.234375" height="603.71875" x="-198.6171875" y="-301.859375"></rect><g class="label" transform="translate(0, -287.859375)" id="mermaidChart1329Text"><g transform="translate(-75.546875,-12.5)"><foreignObject width="151.09375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">General Architecture</div></foreignObject></g></g></g><g class="cluster" id="flowchart-subGraph0-38085" transform="translate(705.2265625,309.859375)" style="opacity: 1;"><rect width="559.984375" height="603.71875" x="-279.9921875" y="-301.859375"></rect><g class="label" transform="translate(0, -287.859375)" id="mermaidChart1329Text"><g transform="translate(-112.2109375,-12.5)"><foreignObject width="224.421875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Architecture with SGD Overlaid</div></foreignObject></g></g></g></g><g class="edgePaths"><g class="edgePath LS-buyer LE-db" id="L-buyer-db" style="opacity: 1;"><path class="path" d="M588.0859375,93.640625L588.0859375,131.140625L652.9248046875,168.640625" marker-end="url(#arrowhead46742)" style="fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead46742" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-cb LE-db" id="L-cb-db" style="opacity: 1;"><path class="path" d="M795.5703125,85.8203125L795.5703125,131.140625L730.7314453125,168.640625" marker-end="url(#arrowhead46743)" style="fill:none"></path><defs><marker id="arrowhead46743" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-db LE-dmB" id="L-db-dmB" style="opacity: 1;"><path class="path" d="M691.828125,213.640625L691.828125,251.140625L691.828125,288.640625" marker-end="url(#arrowhead46744)" style="fill:none"></path><defs><marker id="arrowhead46744" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dmB LE-f2" id="L-dmB-f2" style="opacity: 1;"><path class="path" d="M691.828125,491.71875L691.828125,516.71875L691.828125,541.71875" marker-end="url(#arrowhead46745)" style="fill:none"></path><defs><marker id="arrowhead46745" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-ca LE-da" id="L-ca-da" style="opacity: 1;"><path class="path" d="M206.6171875,85.8203125L206.6171875,131.140625L206.6171875,168.640625" marker-end="url(#arrowhead46746)" style="fill:none"></path><defs><marker id="arrowhead46746" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-da LE-dmA" id="L-da-dmA" style="opacity: 1;"><path class="path" d="M206.6171875,213.640625L206.6171875,251.140625L206.6171875,288.640625" marker-end="url(#arrowhead46747)" style="fill:none"></path><defs><marker id="arrowhead46747" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath LS-dmA LE-fl" id="L-dmA-fl" style="opacity: 1;"><path class="path" d="M206.6171875,491.71875L206.6171875,516.71875L206.6171875,541.71875" marker-end="url(#arrowhead46748)" style="fill:none"></path><defs><marker id="arrowhead46748" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(588.0859375,131.140625)" style="opacity: 1;"><g transform="translate(-88.5703125,-12.5)" class="label"><rect rx="0" ry="0" width="177.140625" height="25"></rect><foreignObject width="177.140625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>Model and Learning Rate</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(691.828125,251.140625)" style="opacity: 1;"><g transform="translate(-38.984375,-12.5)" class="label"><rect rx="0" ry="0" width="77.96875" height="25"></rect><foreignObject width="77.96875" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Model</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(206.6171875,251.140625)" style="opacity: 1;"><g transform="translate(-58.3203125,-12.5)" class="label"><rect rx="0" ry="0" width="116.640625" height="25"></rect><foreignObject width="116.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>New Parameters</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-da-38077" transform="translate(206.6171875,191.140625)" style="opacity: 1;"><rect rx="0" ry="0" x="-72.0546875" y="-22.5" width="144.109375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-62.0546875,-12.5)"><foreignObject width="124.109375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Data Transformer</div></foreignObject></g></g></g><g class="node default" id="flowchart-fl-38078" transform="translate(206.6171875,564.21875)" style="opacity: 1;"><rect rx="0" ry="0" x="-163.6171875" y="-22.5" width="327.234375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-153.6171875,-12.5)"><foreignObject width="307.234375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Federated AI Model Training - Data Utilizer</div></foreignObject></g></g></g><g class="node default" id="flowchart-ca-38079" transform="translate(206.6171875,63.3203125)" style="opacity: 1;"><rect rx="0" ry="0" x="-54.03125" y="-22.5" width="108.0625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-44.03125,-12.5)"><foreignObject width="88.0625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Private Data</div></foreignObject></g></g></g><g class="node default" id="flowchart-dmA-38082" transform="translate(206.6171875,390.1796875)" style="opacity: 1;"><circle x="-101.5390625" y="-22.5" r="101.5390625" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-91.5390625,-12.5)"><foreignObject width="183.078125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Ethereum Smart Contract</div></foreignObject></g></g></g><g class="node default" id="flowchart-db-38068" transform="translate(691.828125,191.140625)" style="opacity: 1;"><rect rx="0" ry="0" x="-182.1328125" y="-22.5" width="364.265625" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-172.1328125,-12.5)"><foreignObject width="344.265625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Stochastic Gradient Descent / Data Transformer</div></foreignObject></g></g></g><g class="node default" id="flowchart-f2-38069" transform="translate(691.828125,564.21875)" style="opacity: 1;"><rect rx="0" ry="0" x="-163.6171875" y="-22.5" width="327.234375" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-153.6171875,-12.5)"><foreignObject width="307.234375" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Federated AI Model Training - Data Utilizer</div></foreignObject></g></g></g><g class="node default" id="flowchart-buyer-38070" transform="translate(588.0859375,63.3203125)" style="opacity: 1;"><circle x="-30.3203125" y="-22.5" r="30.3203125" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-20.3203125,-12.5)"><foreignObject width="40.640625" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Buyer</div></foreignObject></g></g></g><g class="node default" id="flowchart-cb-38072" transform="translate(795.5703125,63.3203125)" style="opacity: 1;"><rect rx="0" ry="0" x="-127.1640625" y="-22.5" width="254.328125" height="45" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-117.1640625,-12.5)"><foreignObject width="234.328125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Sample Data Point - Private Data</div></foreignObject></g></g></g><g class="node default" id="flowchart-dmB-38075" transform="translate(691.828125,390.1796875)" style="opacity: 1;"><circle x="-101.5390625" y="-22.5" r="101.5390625" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-91.5390625,-12.5)"><foreignObject width="183.078125" height="25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Ethereum Smart Contract</div></foreignObject></g></g></g></g></g></g></svg></div><p><span>Let&#39;s take a look at how this is implemented in the code to create a Delta</span></p><ol><li><span>Get the active request which contains the model and learning rate inputs.</span></li><li><span>Train the model which is just computing the SGD function on all the inputs.</span></li><li><span>Publish the delta with all the SGD function outputs.</span></li></ol><pre lang="typescript" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">publishDelta</span>: <span class="cm-keyword">async</span> (<span class="cm-def">trainingType</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>, <span class="cm-def">numberOfFeatures</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">request</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">theDataWalletInstance</span>.<span class="cm-property">getActiveRequest</span>({ <span class="cm-property">from</span>: <span class="cm-variable">account</span> , <span class="cm-property">gasPrice</span>: <span class="cm-number">0</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">fromAddress</span> <span class="cm-operator">=</span> <span class="cm-variable-2">request</span>[<span class="cm-number">0</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">modelJSON</span> <span class="cm-operator">=</span> <span class="cm-variable-2">request</span>[<span class="cm-number">1</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">requestID</span> <span class="cm-operator">=</span> <span class="cm-variable-2">request</span>[<span class="cm-number">2</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable-2">fromAddress</span> <span class="cm-operator">||</span> <span class="cm-operator">!</span><span class="cm-variable-2">modelJSON</span> <span class="cm-operator">||</span> <span class="cm-operator">!</span><span class="cm-variable-2">requestID</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">model</span> <span class="cm-operator">=</span> <span class="cm-operator">&lt;</span><span class="cm-variable">LinearModel</span><span class="cm-operator">&gt;</span><span class="cm-variable">JSON</span>.<span class="cm-property">parse</span>(<span class="cm-variable-2">modelJSON</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">delta</span> <span class="cm-operator">=</span> <span class="cm-variable">trainLinearModel</span>(<span class="cm-variable-2">model</span>, <span class="cm-variable">data</span>.<span class="cm-property">height</span>, <span class="cm-variable">data</span>.<span class="cm-property">weight</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">theDataWalletInstance</span>.<span class="cm-property">publishDelta</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">fromAddress</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">JSON</span>.<span class="cm-property">stringify</span>(<span class="cm-variable-2">delta</span>), </span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable-2">requestID</span>, </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable-2">trainingType</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable-2">numberOfFeatures</span>, </span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span>{ <span class="cm-property">from</span>: <span class="cm-variable">account</span>, <span class="cm-property">gasPrice</span>: <span class="cm-number">0</span> });</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 462px;"></div><div class="CodeMirror-gutters" style="display: none; height: 462px;"></div></div></div></pre><p><span>For reference here&#39;s what the SGD function looks like (it&#39;s fairly simple arithmetic).</span></p><pre lang="typescript" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-keyword">function</span> <span class="cm-def">trainLinearModel</span>(<span class="cm-def">model</span>: <span class="cm-type">LinearModel</span>, <span class="cm-def">inputVariable</span>: <span class="cm-type">number</span>, <span class="cm-def">outputVariable</span>: <span class="cm-type">number</span>): <span class="cm-type">LinearModelDelta</span> {</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">ddSlope</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">2</span> <span class="cm-operator">*</span> (<span class="cm-variable-2">outputVariable</span> <span class="cm-operator">-</span> (<span class="cm-variable-2">model</span>.<span class="cm-property">intercept</span> <span class="cm-operator">+</span> <span class="cm-variable-2">model</span>.<span class="cm-property">slope</span> <span class="cm-operator">*</span> <span class="cm-variable-2">inputVariable</span>));</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">ddIntercept</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable-2">inputVariable</span> <span class="cm-operator">*</span> (<span class="cm-variable-2">outputVariable</span> <span class="cm-operator">-</span> (<span class="cm-variable-2">model</span>.<span class="cm-property">intercept</span> <span class="cm-operator">+</span> <span class="cm-variable-2">model</span>.<span class="cm-property">slope</span> <span class="cm-operator">*</span> <span class="cm-variable-2">inputVariable</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">slopeDelta</span> <span class="cm-operator">=</span> <span class="cm-variable-2">ddSlope</span> <span class="cm-operator">*</span> <span class="cm-variable-2">model</span>.<span class="cm-property">learningRate</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">interceptDelta</span> <span class="cm-operator">=</span> <span class="cm-variable-2">ddIntercept</span> <span class="cm-operator">*</span> <span class="cm-variable-2">model</span>.<span class="cm-property">learningRate</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> {</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">slope</span>: <span class="cm-variable-2">model</span>.<span class="cm-property">slope</span> <span class="cm-operator">-</span> <span class="cm-variable-2">slopeDelta</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">intercept</span>: <span class="cm-variable-2">model</span>.<span class="cm-property">intercept</span> <span class="cm-operator">-</span> <span class="cm-variable-2">interceptDelta</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  };</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><h2><a name="remaining-implementation" class="md-header-anchor"></a><span>Remaining Implementation</span></h2><p><span>Because the client is doing all of the training and returning a new model, the rest of the implementation isn&#39;t too interesting. For completeness I&#39;ll roughly outline the rest of implementation.</span></p><p><strong><span>Buyer-Side Steps</span></strong></p><ol><li><span>Create and store an approximate model.</span></li><li><span>Initiate a DeltaRequest on Ethereum.</span></li><li><span>Listen to the Ethereum event stream for the Delta.</span></li><li><span>Update the model with the Delta.</span></li><li><span>Issue a new request with the new model and a smaller learning rate.</span></li><li><span>Repeat 3-5 until model stabilizes.</span></li></ol><h2><a name="discussion-topics" class="md-header-anchor"></a><span>Discussion Topics</span></h2><p><span>How can buyers trust sellers to return the correct data?</span></p><p><span>How can we incentivize buyers to properly label their delta requests without losing generality?</span></p><p>&nbsp;</p></div>
</body>
</html>